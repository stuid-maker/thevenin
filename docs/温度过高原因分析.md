# 仿真温度过高原因分析（游戏工况尾温约 120°C）

**后续已做修改**：① 增加 η（0.15–0.3，默认 0.2），Q_gen 中设备热为 η·P_device；② 将 h·A 调整为固体导热量级（约 30–50 W/K，当前 h·A≈40）。

**现象**：三条负载曲线（阅读 / 视频 / 游戏）仿真中，温度普遍偏高，游戏工况末期温度可达约 120°C，明显不合理（手机电芯实际通常 < 45°C）。

**结论（先不改动代码）**：主要有三方面原因——**散热能力 h·A 偏小**、**P_device 全部算进电芯发热**、**I = P/V 导致末期电流增大、I²R 升高**。下面用当前参数做量级估计。

---

## 一、热平衡与稳态温升

模型：  
\( \displaystyle \frac{\mathrm{d}T}{\mathrm{d}t} = \frac{1}{C_{\mathrm{th}}}\big( Q_{\mathrm{gen}} - Q_{\mathrm{diss}} \big) \)  
\( Q_{\mathrm{gen}} = I^2 R_{\mathrm{total}} + P_{\mathrm{device}} \)，\( Q_{\mathrm{diss}} = h_{\mathrm{therm}}\,A_{\mathrm{therm}}\,(T - T_\infty) \)。

当前参数（`params_2rc_isothermal.yaml`）：
- \( C_{\mathrm{th}} = m\,c_p = 0.045 \times 1050 = 47.25 \) J/K
- \( h\!\cdot\!A = 6.5 \times 0.01 = 0.065 \) W/K
- \( T_\infty = 298.15 \) K（25°C）

稳态时 \( Q_{\mathrm{gen}} = Q_{\mathrm{diss}} \) ⇒  
\( \Delta T = T - T_\infty = Q_{\mathrm{gen}} / (h\!\cdot\!A) \)。

即：**每 1 W 发热对应温升约 1/0.065 ≈ 15.4 K**。若 \( Q_{\mathrm{gen}} \approx 7 \) W，稳态温升约 **107 K**，即稳态温度约 **132°C**，与“游戏最后温度约 120°C”同量级。

因此，温度过高的**直接数量原因**是：**在现有 h·A 下，当前算出的 \( Q_{\mathrm{gen}} \) 对应的稳态温升本身就有一百多 K**。

---

## 二、原因 1：散热系数 h·A 偏小

- 当前 \( h\!\cdot\!A = 0.065 \) W/K，散热能力很弱。
- 游戏工况下 \( Q_{\mathrm{gen}} \) 约 6–8 W（见下），若要稳态温升控制在例如 20 K 以内，需要  
  \( h\!\cdot\!A \gtrsim 7/20 \approx 0.35 \) W/K，即约为当前的 **5 倍以上**。
- 所以：**在发热量不变的前提下，仅靠当前 h·A，模型就会算到一百多度的稳态温度**；若希望仿真温度落在合理范围（例如 < 45°C），要么显著增大 h·A（或 h / A），要么减小模型中计入的 \( Q_{\mathrm{gen}} \)（见下）。

---

## 三、原因 2：P_device 全部当作电芯发热（物理上偏大）

- 当前写法：**外电路功率 \( P_{\mathrm{device}}(t) \) 全部计入电芯热源**，即  
  \( Q_{\mathrm{gen}} = I^2 R_{\mathrm{total}} + P_{\mathrm{device}} \)。
- 物理上：手机从电池“抽出”的 6.6 W（游戏）主要消耗在**屏幕、SoC、射频等**，这些热量大多在器件附近散掉（屏、金属中框、空气），**只有一部分通过热传导进入电芯**。
- 因此，把 **100% 的 \( P_{\mathrm{device}} \) 都算成电芯发热**会**高估**电芯温升。更合理的做法是：  
  \( Q_{\mathrm{gen}} = I^2 R_{\mathrm{total}} + \alpha\,P_{\mathrm{device}} \)，其中 \( \alpha \) 为“进入电芯的比例”，可能约 0.1–0.3（需实测或结构估计）。
- 若 \( \alpha \approx 0.2 \)，游戏时仅 6.6×0.2 ≈ 1.3 W 作为电芯热源，稳态温升会大幅下降（约 1.3/0.065 ≈ 20 K），温度就接近合理范围。  
→ **当前“P_device 全进电芯”的假设是温度整体偏高的一个重要原因。**

---

## 四、原因 3：I = P_load / V_sim 导致末期电流与 I²R 偏大

- 电流由 \( I = P_{\mathrm{load}} / V_{\mathrm{sim}} \) 得到；放电过程中 \( V_{\mathrm{sim}} \) 从约 4 V 降到 2.5–2.6 V，**电流会逐渐增大**（同一功率下电压越低电流越大）。
- 例如游戏 6.6 W：  
  - 初期 V≈3.8 V ⇒ I≈1.74 A；  
  - 末期 V≈2.6 V ⇒ I≈2.54 A。  
  末期电流明显更大，**Joule 热 \( I^2 R_{\mathrm{total}} \) 在末期会升高**（即便 R 随温度升高略有下降，I² 的增大仍占主导）。
- 因此：**I = P/V 的耦合会放大放电末段的发热**，使后期温升更猛，对“游戏最后温度到 120°C”有贡献。

---

## 五、量级汇总（游戏工况）

| 项目 | 量级 | 说明 |
|------|------|------|
| \( P_{\mathrm{device}} \) | 6.6 W | 全部被算进电芯发热（见上，可能高估） |
| \( I^2 R_{\mathrm{total}} \) | 约 0.3–1 W | 随 I、R、T 变化；末期 I 大，贡献增大 |
| \( Q_{\mathrm{gen}} \) 合计 | 约 7–8 W | 稳态温升 ≈ 7.5/0.065 ≈ 115 K ⇒ 约 140°C |
| \( h\!\cdot\!A \) | 0.065 W/K | 散热弱，难以把温升压到合理范围 |
| \( C_{\mathrm{th}} \) | 47.25 J/K | 时间常数 \( \tau \sim C_{\mathrm{th}}/(h\!\cdot\!A) \approx 727 \) s，1 h 内会接近稳态 |

综合：**散热弱 + 把整机功耗全算进电芯 + 末期 I 增大**，三者叠加，得到“游戏最后约 120°C、整体温度都偏高”的结果。

---

## 六、小结（仅分析，未改参数与公式）

| 原因 | 影响 | 说明 |
|------|------|------|
| **h·A 过小** | 稳态温升 ∝ 1/(h·A)，当前 0.065 W/K 导致 7 W 对应约 108 K 温升 | 若要保持现有 \( Q_{\mathrm{gen}} \)，需显著增大 h 或 A，才能把温度压到合理范围 |
| **P_device 全进电芯** | 把整机功耗 100% 当作电芯热源，高估了实际传入电芯的热量 | 物理上应为“传入电芯的比例”α·P_device，α 可能 0.1–0.3 |
| **I = P/V 耦合** | 放电末期 V 低、I 大，I²R 增大，末期发热加重 | 放大末期温升，尤其在高功率工况 |

若要后续改参或改公式，可优先考虑：  
1）**增大 h·A**（或标定更符合实机的 h、A）；  
2）**对 P_device 乘系数 α**（仅一部分计入电芯）；  
3）必要时再审视 I = P/V 在低压段的合理性（如是否加电流限幅等）。  
本文档只做原因分析，不实施任何代码或参数修改。
