# 2-RC 等效电路 + 集总热模型：理论微分方程

以下方程**不代入具体数值**，仅用符号表示参量、系数与常数。  
参量取值范围、系数与常数的取值见文末表格。

---

## 一、状态变量（State Variables）

| 符号 | 含义 | 单位 | 备注 |
|------|------|------|------|
| \(z\) 或 \(\mathrm{soc}\) | 荷电状态 | 无量纲 | \(z \in [0,\,1]\)，满电为 1 |
| \(T\) 或 \(T_{\mathrm{cell}}\) | 电芯温度 | K | 集总温度 |
| \(h\) 或 \(h_{\mathrm{hyst}}\) | 迟滞电压 | V | 当前模型取 0 |
| \(\eta_1,\,\eta_2\) | 两个 RC 支路极化过电位 | V | 与电流方向约定一致 |

外加输入：电流 \(I(t)\) [A]，时间 \(t\) [s]。

---

## 二、微分方程组（Differential Equations）

### 2.1 荷电状态 SOC

\[
\frac{\mathrm{d}z}{\mathrm{d}t}
\;=\;
-\,\frac{c_{\mathrm{e}}}{3600\,Q_{\mathrm{n}}}\,I(t)\,.
\]

- \(c_{\mathrm{e}}\)：库伦效率系数，放电为 1，充电可为 \(c_{\mathrm{e}} \leq 1\)。
- \(Q_{\mathrm{n}}\)：额定容量 [Ah]；3600 为秒与小时的换算系数 [s/h]，使 \(\mathrm{d}z/\mathrm{d}t\) 的量纲为 1/s。

### 2.2 电芯温度（集总热平衡）

\[
\frac{\mathrm{d}T}{\mathrm{d}t}
\;=\;
\frac{1}{C_{\mathrm{th}}}\,\Big(
  Q_{\mathrm{gen}} \,-\, Q_{\mathrm{diss}}
\Big)\,,
\]

其中

\[
Q_{\mathrm{gen}}
\;=\;
I(t)^2\,R_{\mathrm{total}}(z,\,T)
\;+\;
\eta\,P_{\mathrm{device}}(t)\,,
\qquad
Q_{\mathrm{diss}}
\;=\;
h_{\mathrm{therm}}\,A_{\mathrm{therm}}\,\big(T \,-\, T_{\infty}\big)\,.
\]
其中 \(\eta\) 为外电路功耗传入电芯的比例（约 0.15–0.3），\(P_{\mathrm{device}}\) 不能全部算进电芯发热。

- \(C_{\mathrm{th}} = m\,c_p\)：热容 [J/K]。
- \(R_{\mathrm{total}} = R_0 + R_1 + R_2\)：总电阻 [Ω]，见下节。
- \(P_{\mathrm{device}}(t)\)：外电路/设备传入电芯的功率 [W]，可为 0。
- \(\eta\)：外电路功耗传入电芯的比例，约 0.15–0.3（\(P_{\mathrm{device}}\) 不能全进电芯）。
- \(h_{\mathrm{therm}}\)：等效导热系数 [W/(m²·K)]，手机内固体导热（中框/石墨贴/均热板）时 h·A 约 30–50 W/K。
- \(A_{\mathrm{therm}}\)：有效导热面积 [m²]。
- \(T_{\infty}\)：环境温度 [K]。

### 2.3 迟滞电压（当前模型关闭）

\[
\frac{\mathrm{d}h}{\mathrm{d}t}
\;=\;
\big|c_{\mathrm{e}}\,I(t)\,\gamma\,/\,(3600\,Q_{\mathrm{n}})\big|\,\cdot\,\Big(
  \mathrm{sign}\big(-I(t)\big)\,M_{\mathrm{hyst}}(z) \,-\, h
\Big)\,.
\]

- \(\gamma\)：迟滞系数，当前取 0。
- \(M_{\mathrm{hyst}}(z)\)：迟滞幅值函数 [V]，当前取 0。  
  故实际使用中 \(\mathrm{d}h/\mathrm{d}t = 0\)，\(h \equiv 0\)。

### 2.4 RC 极化过电位（2 个 RC 对）

\[
\frac{\mathrm{d}\eta_1}{\mathrm{d}t}
\;=\;
-\,\frac{\eta_1}{\tau_1(z,\,T)}
\;+\;
\frac{I(t)}{C_1(z,\,T)}
\;=\;
-\,\frac{\eta_1}{R_1(z,\,T)\,C_1(z,\,T)}
\;+\;
\frac{I(t)}{C_1(z,\,T)}\,,
\]

\[
\frac{\mathrm{d}\eta_2}{\mathrm{d}t}
\;=\;
-\,\frac{\eta_2}{\tau_2(z,\,T)}
\;+\;
\frac{I(t)}{C_2(z,\,T)}
\;=\;
-\,\frac{\eta_2}{R_2(z,\,T)\,C_2(z,\,T)}
\;+\;
\frac{I(t)}{C_2(z,\,T)}\,.
\]

- \(\tau_j = R_j\,C_j\)：第 \(j\) 个 RC 对的时间常数 [s]。
- \(R_j(z,\,T)\)：极化电阻 [Ω]，\(C_j(z,\,T)\)：极化电容 [F]，见下节。

---

## 三、代数输出（端电压）

\[
V(t)
\;=\;
U_{\mathrm{ocv}}(z,\,T)
\;-\;
I(t)\,R_0(z,\,T)
\;-\;
\eta_1
\;-\;
\eta_2\,.
\]

（若考虑迟滞，则 \(U_{\mathrm{ocv}}\) 可写为 \(U_{\mathrm{ocv}} + h\)；当前 \(h=0\)。）

---

## 四、本构关系（Constitutive Relations）

以下所有函数均为 \((z,\,T)\) 的函数，\(z=\mathrm{soc}\)，\(T=T_{\mathrm{cell}}\) [K]。  
**不代入具体数值**，仅写出形式及所含**参量、系数、常数**的符号。

### 4.1 开路电压 OCV

\[
U_{\mathrm{ocv}}(z,\,T)
\;=\;
U_{\mathrm{ocv,ref}}(z)
\;+\;
k_{U,T}\,\big(T \,-\, T_{\mathrm{ref}}\big)\,.
\]

- \(U_{\mathrm{ocv,ref}}(z)\)：参考温度下的 OCV–SOC 曲线，多取为 7 次多项式：
  \[
  U_{\mathrm{ocv,ref}}(z)
  \;=\;
  a_7\,z^7 \,+\, a_6\,z^6 \,+\, a_5\,z^5 \,+\, a_4\,z^4 \,+\, a_3\,z^3 \,+\, a_2\,z^2 \,+\, a_1\,z \,+\, a_0\,.
  \]
- \(k_{U,T}\)：OCV 对温度的系数 [V/K]，即 \(\partial U_{\mathrm{ocv}}/\partial T\)。
- \(T_{\mathrm{ref}}\)：参考温度 [K]。

### 4.2 欧姆内阻 \(R_0\)（Arrhenius）

\[
R_0(z,\,T)
\;=\;
R_{0,\mathrm{ref}}\;\exp\left(\;
  \frac{E_{\mathrm{a},R}}{k_{\mathrm{B}}}\,\left(
    \frac{1}{T} \,-\, \frac{1}{T_{\mathrm{ref}}}
  \right)
\;\right)\,.
\]

- \(R_{0,\mathrm{ref}}\)：参考温度下的欧姆内阻 [Ω]。
- \(E_{\mathrm{a},R}/k_{\mathrm{B}}\)：活化能与玻尔兹曼常数之比 [K]，控制温度敏感性。

### 4.3 极化电阻 \(R_1,\,R_2\)（Arrhenius）

\[
R_j(z,\,T)
\;=\;
R_{j,\mathrm{ref}}\;\exp\left(\;
  \frac{E_{\mathrm{a},R}}{k_{\mathrm{B}}}\,\left(
    \frac{1}{T} \,-\, \frac{1}{T_{\mathrm{ref}}}
  \right)
\;\right)\,,\qquad j=1,\,2\,.
\]

- \(R_{1,\mathrm{ref}},\,R_{2,\mathrm{ref}}\)：参考温度下的极化电阻 [Ω]。
- 与 \(R_0\) 共用同一 \(E_{\mathrm{a},R}/k_{\mathrm{B}}\) 与 \(T_{\mathrm{ref}}\)（可扩展为不同系数）。

### 4.4 极化电容 \(C_1,\,C_2\)（温度指数）

\[
C_j(z,\,T)
\;=\;
C_{j,\mathrm{ref}}\;\exp\left(\;
  \frac{E_{\mathrm{a},C}}{k_{\mathrm{B}}}\,\left(
    \frac{1}{T} \,-\, \frac{1}{T_{\mathrm{ref}}}
  \right)
\;\right)\,,\qquad j=1,\,2\,.
\]

- \(C_{1,\mathrm{ref}},\,C_{2,\mathrm{ref}}\)：参考温度下的极化电容 [F]。
- \(E_{\mathrm{a},C}/k_{\mathrm{B}}\)：电容温度系数 [K]，可为负（温升增大动力学、等效电容增大）。

---

## 五、参量、系数与常数汇总（取值范围与典型取值）

**说明**：以下“取值范围”为建模/标定时的建议范围；“典型/当前取值”为代码中使用的数值，方程中**不代入**，仅作参考。

### 5.1 状态与输入

| 符号 | 含义 | 单位 | 取值范围 | 典型/当前取值 |
|------|------|------|----------|----------------|
| \(z\) | 荷电状态 | — | \([0,\,1]\) | 初始 1.0（满电） |
| \(T\) | 电芯温度 | K | 依工况 | 初始 \(\approx T_{\infty}\) 或实测 |
| \(\eta_1,\,\eta_2\) | RC 过电位 | V | — | 初始 0 |
| \(I(t)\) | 电流 | A | 依工况 | 由数据或工况给定 |
| \(t\) | 时间 | s | — | — |

### 5.2 电学参量与系数

| 符号 | 含义 | 单位 | 取值范围 | 典型/当前取值 |
|------|------|------|----------|----------------|
| \(Q_{\mathrm{n}}\) | 额定容量 | Ah | 与电芯一致 | 2～4（如 NASA 2 Ah） |
| \(c_{\mathrm{e}}\) | 库伦效率 | — | \((0,\,1]\)，放电=1 | 1.0 |
| \(R_{0,\mathrm{ref}}\) | 参考欧姆内阻 | Ω | 0.01～0.3 | 0.04 |
| \(R_{1,\mathrm{ref}},\,R_{2,\mathrm{ref}}\) | 参考极化电阻 | Ω | 0.01～0.2 | 0.02, 0.02 |
| \(C_{1,\mathrm{ref}},\,C_{2,\mathrm{ref}}\) | 参考极化电容 | F | 100～5000 | 1000, 2000 |
| \(E_{\mathrm{a},R}/k_{\mathrm{B}}\) | R 的 Arrhenius 系数 | K | 2000～6000 | 4000 |
| \(E_{\mathrm{a},C}/k_{\mathrm{B}}\) | C 的温度指数系数 | K | 负值，量级 1000～3000 | -2000 |
| \(T_{\mathrm{ref}}\) | 电学/OCV 参考温度 | K | 273.15～313.15 | 298.15 |

### 5.3 OCV 多项式系数与温度系数

| 符号 | 含义 | 单位 | 取值范围 | 典型/当前取值 |
|------|------|------|----------|----------------|
| \(a_7\) | OCV 多项式 7 次项 | V | 依 OCV–SOC 拟合 | 84.6 |
| \(a_6\) | 6 次项 | V | 依拟合 | -348.6 |
| \(a_5\) | 5 次项 | V | 依拟合 | 592.3 |
| \(a_4\) | 4 次项 | V | 依拟合 | -534.3 |
| \(a_3\) | 3 次项 | V | 依拟合 | 275.0 |
| \(a_2\) | 2 次项 | V | 依拟合 | -80.3 |
| \(a_1\) | 1 次项 | V | 依拟合 | 12.8 |
| \(a_0\) | 常数项 | V | 依拟合 | 2.8 |
| \(k_{U,T}\) | OCV 温度系数 | V/K | 0.0003～0.0005 | 0.0004 |

### 5.4 热学参量与系数

| 符号 | 含义 | 单位 | 取值范围 | 典型/当前取值 |
|------|------|------|----------|----------------|
| \(m\) | 电芯质量 | kg | 与电芯一致 | 0.045 |
| \(c_p\) | 比热容 | J/(kg·K) | 1000～1100 | 1050 |
| \(C_{\mathrm{th}} = m\,c_p\) | 热容 | J/K | 40～50（手机电芯量级） | 47.25 |
| \(\eta\) | 外电路传入电芯比例 | — | 0.15～0.3 | 0.2 |
| \(h_{\mathrm{therm}}\) | 等效导热系数 | W/(m²·K) | 固体导热时 h·A 约 30～50 W/K | 4000（h·A≈40） |
| \(A_{\mathrm{therm}}\) | 有效导热面积 | m² | 与几何一致 | 0.01 |
| \(T_{\infty}\) | 环境温度 | K | 273.15～313.15 | 298.15 或 297.15（24°C） |
| \(P_{\mathrm{device}}(t)\) | 外电路传入功率 | W | \(\geq 0\) | 0（NASA 纯阻性负载） |

### 5.5 迟滞（当前关闭）

| 符号 | 含义 | 单位 | 取值范围 | 典型/当前取值 |
|------|------|------|----------|----------------|
| \(\gamma\) | 迟滞系数 | — | 0 或正 | 0 |
| \(M_{\mathrm{hyst}}(z)\) | 迟滞幅值函数 | V | — | 0 |

---

## 六、方程小结（紧凑形式）

**微分方程**（5 个状态：\(z,\,T,\,h,\,\eta_1,\,\eta_2\)，当前 \(h\equiv 0\)）：

\[
\boxed{
\begin{aligned}
\frac{\mathrm{d}z}{\mathrm{d}t}
&\;=\;
-\,\frac{c_{\mathrm{e}}}{3600\,Q_{\mathrm{n}}}\,I(t)\,,
\\
\frac{\mathrm{d}T}{\mathrm{d}t}
&\;=\;
\frac{1}{C_{\mathrm{th}}}\,\left(
  I^2\,R_{\mathrm{total}}(z,T)
  \,+\,
  \eta\,P_{\mathrm{device}}(t)
  \,-\,
  h_{\mathrm{therm}}\,A_{\mathrm{therm}}\,(T\,-\,T_{\infty})
\right)\,,
\\
\frac{\mathrm{d}\eta_1}{\mathrm{d}t}
&\;=\;
-\,\frac{\eta_1}{R_1(z,T)\,C_1(z,T)}
\;+\;
\frac{I(t)}{C_1(z,T)}\,,
\\
\frac{\mathrm{d}\eta_2}{\mathrm{d}t}
&\;=\;
-\,\frac{\eta_2}{R_2(z,T)\,C_2(z,T)}
\;+\;
\frac{I(t)}{C_2(z,T)}\,.
\end{aligned}
}
\]

**代数输出**：

\[
\boxed{
V(t)
\;=\;
U_{\mathrm{ocv}}(z,\,T)
\;-\;
I(t)\,R_0(z,\,T)
\;-\;
\eta_1
\;-\;
\eta_2\,.
}
\]

**本构**：\(U_{\mathrm{ocv}}(z,T)\)、\(R_0(z,T)\)、\(R_1(z,T)\)、\(R_2(z,T)\)、\(C_1(z,T)\)、\(C_2(z,T)\) 见第四节；其中 \(R_{\mathrm{total}} = R_0 + R_1 + R_2\)。

以上即为当前实现的 2-RC + 集总热模型的完整理论微分方程与参量/系数/常数说明。
