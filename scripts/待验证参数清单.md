# 待验证/标定参数与变量清单

以下参数和变量目前为**依实例经验或暂时取值**，需用**实测数据标定**或**验证后修改**。  
**核对说明**：已与 `params_2rc_isothermal.yaml` 和 `simple_2rc_step_by_step.py` 逐项对照，无遗漏、无多余。

---

## 一、params_2rc_isothermal.yaml（等效电路与热学）

### 1.1 需标定/验证的数值参数（共 16 项）

| 参数 | 当前取值 | 说明 / 待验证内容 |
|------|----------|-------------------|
| **soc0** | 1.0 | 初始 SOC（老化中假设每天充满=1.0），若初始条件不同需改 |
| **capacity** | 4.0 Ah | 手机电池 3~5 Ah 典型值，需与实测额定容量一致 |
| **ce** | 1.0 | 库伦效率，充放电不对称时需区分 |
| **mass** | 0.045 kg (45 g) | 电芯质量，需与实物或规格一致 |
| **Cp** | 1050 J/(kg·K) | 比热容，文献/实测约 1000~1100 |
| **T_inf** | 298.15 K (25°C) | 环境温度，可按工况改为变化或不同场景 |
| **h_therm** | 8 W/(m²·K) | 对流换热系数，被动散热约 5~10，需与散热条件一致 |
| **A_therm** | 0.01 m² | 有效散热面积，需与电芯/模组几何一致 |
| **ocv 多项式系数** | 84.6, -348.6, 592.3, -534.3, 275, -80.3, 12.8, 2.8 | OCV(SOC) 曲线，**强烈建议用实测 OCV-SOC 拟合** |
| **ocv 温度系数 dUoc/dT** | 0.0004 V/K (0.4 mV/K) | 开路电压温度系数，文献约 0.3~0.5 mV/K |
| **R0_ref** | 0.04 Ω | 参考温度下欧姆内阻，需实测或 EIS 拟合 |
| **R1_ref, R2_ref** | 0.02, 0.02 Ω | 极化电阻参考值，需实测或 EIS 拟合 |
| **Arrhenius Ea/k (R)** | 4000 K | R(T) 活化能/玻尔兹曼常数比，可随老化/温度特性标定 |
| **T_ref (R/OCV)** | 298.15 K | Arrhenius/OCV 参考温度，与 R_ref 对应 |
| **C1_ref, C2_ref** | 1000, 2000 F | 极化电容参考值，需与时间常数 τ=R*C 一起标定 |
| **C(T) 指数系数** | -2000 (1/T−1/T_ref) | C 随 T 变化形式与系数，可简化为常数或另拟合 |

### 1.2 模型结构/开关（当前固定，若改模型则需考虑）

| 参数 | 当前取值 | 说明 |
|------|----------|------|
| **num_RC_pairs** | 2 | 1-RC/2-RC 模型选择，可用 AIC/BIC 或验证误差选 |
| **gamma** | 0.0 | 迟滞系数，当前关闭；若考虑迟滞需标定 |
| **M_hyst** | 0.0 | 迟滞幅值，当前关闭 |
| **isothermal** | True | 包内温度方程关闭，脚本自算 T；若用包内热则改 False |

---

## 二、simple_2rc_step_by_step.py（工况与老化）

### 2.1 电压/电流截止（3 项）

| 变量 | 当前取值 | 说明 / 待验证内容 |
|------|----------|-------------------|
| **V_MIN** | 2.5 V | 放电截止电压，需与电芯规格/BMS 一致（常见 2.8~3.0） |
| **V_MAX** | 4.25 V | 充电截止电压，需与电芯规格一致（常见 4.2~4.35） |
| **I_CUTOFF_A** | 0.05 A | 截止电流（当前仅定义未参与逻辑），可按“静置”定义 |

### 2.2 单次 1 h 演示工况（I_step_A、P_device_W）（5 项）

| 变量/区间 | 当前取值 | 说明 / 待验证内容 |
|-----------|----------|-------------------|
| **待机 I** | 0.1 A | 待机电流，可依实测功耗/电压换算 |
| **游戏 I** | 2.0 A | 高负载电流，0.5C@4Ah，可依实测调整 |
| **游戏时段** | 0.2~0.5 h | 演示用阶跃区间，可依场景改 |
| **P_device 待机** | 0.05 W | 待机时外电路对电芯加热功率 |
| **P_device 游戏** | 3.0 W | 游戏时外电路对电芯加热（单次演示用） |

### 2.3 老化用每日工况（I_daily_A、P_device_daily_W）（5 项）

| 变量/区间 | 当前取值 | 说明 / 待验证内容 |
|-----------|----------|-------------------|
| **游戏 I** | 2.0 A | 每日前 2 h 电流，0.5C@4Ah |
| **待机 I** | 0.1 A | 每日其余 22 h 电流 |
| **游戏时长** | 2 h | 每日高负载时长，可依使用习惯改 |
| **P_device 游戏** | 1.0 W | 游戏时传入电芯的外热 |
| **P_device 待机** | 0.05 W | 待机时传入电芯的外热 |

### 2.4 老化公式 calculate_aging（5 项）

| 变量 | 当前取值 | 说明 / 待验证内容 |
|------|----------|-------------------|
| **T_ref** | 298.15 K | 老化公式参考温度，与 Arrhenius 一致 |
| **Ea_over_R** | 4000 K | 老化活化能/气体常数比，**需用循环/存储老化数据标定** |
| **k_aging** | 0.65e-3 | 老化速率系数，**强烈建议用容量衰减数据标定** |
| **z** | 0.6 | Ah 通过量的次线性指数，文献常见 0.5~0.7，可标定 |
| **单日 loss 上限** | 0.01 (1%) | 数值保护，可按需要放宽或收紧 |

### 2.5 老化时参数随 SOH 更新 update_battery_params（2 项）

| 变量 | 当前取值 | 说明 / 待验证内容 |
|------|----------|-------------------|
| **r_SOH** | 0.8 | SOH 从 1→0 时内阻增加倍数，**需老化后 EIS/内阻数据验证** |
| **容量与 SOH** | capacity = Q_nominal × SOH | 线性容量衰减，可改为非线性并标定 |

### 2.6 仅影响仿真精度/速度（一般不作为物理标定）

| 变量 | 当前取值 | 说明 |
|------|----------|------|
| **DAILY_DT_S** | 60.0 s | 每日仿真步长，影响精度与耗时 |
| **run_one_day 的 t_end_s** | 86400.0 s | 单日时长 24 h，固定 |
| **单次演示 dt_s / t_end_s** | 1.0 s / 3600 s | 单次 1 h 演示的步长与时长 |

---

## 三、汇总计数

| 类别 | 项数 |
|------|------|
| params 数值参数（1.1） | 16 |
| params 结构/开关（1.2） | 4 |
| 脚本 截止（2.1） | 3 |
| 脚本 单次演示工况（2.2） | 5 |
| 脚本 每日工况（2.3） | 5 |
| 脚本 老化公式（2.4） | 5 |
| 脚本 SOH 更新（2.5） | 2 |
| 脚本 数值/步长（2.6，非物理标定） | 3 |
| **合计（需标定/验证）** | **40**（含 4 项结构/开关；纯数值待标定 36 项） |

---

## 四、建议标定顺序

1. **电学**：OCV(SOC)、R0/R1/R2、C1/C2（恒温或窄温区 EIS + OCV 测试）。
2. **热学**：C_th(mass×Cp)、h·A（温升/温降曲线或稳态温差）。
3. **工况**：I(t)、P_device(t)（功耗/电流日志或典型场景）。
4. **老化**：k_aging、z、Ea_over_R、r_SOH（循环/存储容量衰减 + 内阻随 SOH 变化）。

标定与验证完成后，建议在论文或报告中注明“标定前/标定后”取值及数据来源。

---

## 五、脚本/模型需要哪几种数据

当前脚本**不读外部数据文件**，I(t)、P_device(t) 由代码里的函数给出。若改为**数据驱动**或做**标定/验证**，需要以下几类数据。

### 5.1 仿真驱动（用数据替代 I/P_device 函数时）

| 数据类型 | 变量 | 单位 | 说明 |
|----------|------|------|------|
| **时间** | t | s（或 h，需统一） | 时间序列，等间隔或不等间隔 |
| **电流** | I | A | 流经电池的电流，正=放电 |
| **外电路功率**（可选） | P_device | W | 传入电芯的外热（CPU/屏等），若无则填 0 |

→ 若只给 **t、I**，脚本可默认 P_device=0 或由你指定常数/另一列。

### 5.2 标定用（第一次数据：拟合参数）

| 数据类型 | 变量 | 单位 | 用于标定 |
|----------|------|------|----------|
| **时间** | t | s | 对齐所有量 |
| **电流** | I | A | 驱动模型、算 Ah 通过量 |
| **端电压** | V | V | 拟合 R0/R1/R2、C1/C2、OCV |
| **温度**（可选但建议） | T | °C 或 K | 拟合 R(T)、C(T)、OCV(T)、热学 C_th/hA |
| **SOC**（可选） | SOC | 0~1 | 若实测 SOC，可辅助 OCV(SOC)、容量 |

**或** 单独曲线/表格：

- **OCV–SOC 曲线**：多组 (SOC, OCV)，用于拟合 OCV(SOC) 多项式。
- **脉冲/EIS 数据**：阶跃电流下的 V(t) 或阻抗谱，用于拟合 R0/R1/R2、C1/C2。
- **温升/温降曲线**：已知 I(t)、P_device(t) 下的 T(t)，用于拟合 C_th、h·A。

### 5.3 验证用（第二次数据：评估精度）

与 5.2 **同结构、不同样本**（未参与标定的工况或批次）：

| 数据类型 | 变量 | 单位 | 用途 |
|----------|------|------|------|
| **时间** | t | s | 对齐 |
| **电流** | I | A | 驱动模型 |
| **端电压** | V | V | 与模型预测 V(t) 对比（RMSE、最大误差等） |
| **温度**（可选） | T | °C 或 K | 与模型预测 T(t) 对比 |
| **SOC**（可选） | SOC | 0~1 | 与模型预测 SOC(t) 对比 |

### 5.4 老化标定用（可选）

| 数据类型 | 变量 | 单位 | 用于标定 |
|----------|------|------|----------|
| **循环次数或日历时间** | cycle 或 day | — | 自变量 |
| **容量衰减** | Q 或 SOH | Ah 或 0~1 | 拟合 k_aging、z、Ea_over_R |
| **内阻随 SOH/cycle** | R0 或 R_total | Ω | 拟合 r_SOH、R(SOH) 关系 |
| **工况摘要**（可选） | T_avg、Ah_throughput 等 | K、Ah | 与老化公式对应 |

### 5.5 汇总：最少/推荐配置

| 用途 | 最少需要 | 推荐 |
|------|----------|------|
| **仅用数据驱动 I(t)** | t, I | t, I；P_device 可选 |
| **标定电学参数** | t, I, V | t, I, V, T；或 OCV-SOC + 脉冲 V(t) |
| **标定热学参数** | t, I, T（且已知或假设 P_device） | t, I, P_device, T |
| **验证模型** | t, I, V | t, I, V, T（可选 SOC） |
| **标定老化** | cycle/day, SOH 或 Q | cycle/day, SOH, R(SOH)，可选 T_avg/Ah |
